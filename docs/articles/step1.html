<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Step I: Feature Extraction â€¢ PETLER</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Step I: Feature Extraction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PETLER</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/data.html">Data</a>
</li>
<li>
  <a href="../articles/step1.html">Step I</a>
</li>
<li>
  <a href="../articles/step2.html">Step II</a>
</li>
<li>
  <a href="../articles/multicore.html">Multicore</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/celehs/PETLER">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Step I: Feature Extraction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/celehs/PETLER/blob/master/vignettes/step1.Rmd"><code>vignettes/step1.Rmd</code></a></small>
      <div class="hidden name"><code>step1.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(PETLER)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">## Loading required package: survival</span></a></code></pre></div>
<p>We can use the <code>petler.fpca</code> function to create the base functions required to run the PETLER algorithm. By default, you only need to provide data in the list format mentioned above. However, you can view the help documentation (<code><a href="../reference/petler.fpca.html">?petler.fpca</a></code>) or click <a href="https://celehs.github.io/PETLER/reference/petler.fpca.html">HERE</a> to customize configurable arguments.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span>(obj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/petler.fpca.html">petler.fpca</a></span>(data_org))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">##    user  system elapsed </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">## 142.076  18.887  75.564</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(obj, <span class="st">"step1.rds"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">DF.long &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="dt">code =</span> <span class="st">"pred1"</span>, obj<span class="op">$</span>base[[<span class="dv">1</span>]]<span class="op">$</span>mean),</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="dt">code =</span> <span class="st">"pred2"</span>, obj<span class="op">$</span>base[[<span class="dv">2</span>]]<span class="op">$</span>mean),</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="dt">code =</span> <span class="st">"pred3"</span>, obj<span class="op">$</span>base[[<span class="dv">3</span>]]<span class="op">$</span>mean))</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">data.table<span class="op">::</span><span class="kw">data.table</span>(DF.long)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">##        code      x      f_mu</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">##    1: pred1 0.0000 0.7077411</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">##    2: pred1 0.0025 0.7761086</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">##    3: pred1 0.0050 0.8467675</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">##    4: pred1 0.0075 0.9192670</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">##    5: pred1 0.0100 0.9931133</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">##   ---                       </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">## 1199: pred3 0.9900 7.1296992</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">## 1200: pred3 0.9925 6.6896645</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">## 1201: pred3 0.9950 6.1782279</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">## 1202: pred3 0.9975 5.6109825</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">## 1203: pred3 1.0000 5.0067372</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">TrainCode &lt;-<span class="st"> </span>data_org<span class="op">$</span>TrainCode</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">TrainCode[, monthstd <span class="op">:</span><span class="er">=</span><span class="st"> </span>month <span class="op">/</span><span class="st"> </span>fu_time]  </a>
<a class="sourceLine" id="cb4-3" data-line-number="3">DF.t &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">code =</span> <span class="st">"pred1"</span>, <span class="dt">t =</span> <span class="kw"><a href="https://rdrr.io/r/base/with.html">with</a></span>(TrainCode, <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(monthstd, pred1))),</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">code =</span> <span class="st">"pred2"</span>, <span class="dt">t =</span> <span class="kw"><a href="https://rdrr.io/r/base/with.html">with</a></span>(TrainCode, <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(monthstd, pred2))),</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">code =</span> <span class="st">"pred3"</span>, <span class="dt">t =</span> <span class="kw"><a href="https://rdrr.io/r/base/with.html">with</a></span>(TrainCode, <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(monthstd, pred3))))</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(DF.t, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> t)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">y =</span> ..density..), <span class="dt">color=</span><span class="st">"black"</span>, <span class="dt">fill=</span><span class="st">"white"</span>, <span class="dt">binwidth =</span> <span class="fl">0.01</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> x, <span class="dt">y =</span> f_mu), <span class="dt">data =</span> DF.long, <span class="dt">colour =</span> <span class="st">"blue"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>code, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"x"</span>) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>()</a></code></pre></div>
<p><img src="step1_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Liang Liang, Hajime Uno, Ming Yang, Tianxi Cai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
