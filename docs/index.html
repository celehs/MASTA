<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-modal Automated Survival Time Annotation • MASTA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Multi-modal Automated Survival Time Annotation">
<meta property="og:description" content="Implements multi-modal automated time survival annotation (MASTA) algorithm with longitudinal electronic health records.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">MASTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/data.html">Data</a>
</li>
<li>
  <a href="articles/step1.html">Step I</a>
</li>
<li>
  <a href="articles/step2.html">Step II</a>
</li>
<li>
  <a href="articles/multicore.html">Multicore</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="multi-modal-automated-survival-time-annotation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#multi-modal-automated-survival-time-annotation" class="anchor"></a>Multi-modal Automated Survival Time Annotation</h1></div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Large clinical datasets derived from insurance claims and electronic health record (EHR) systems are valuable sources for precision medicine research. These datasets can be used to develop models for personalized prediction of risk or treatment response. Efficiently deriving prediction models using real world data, however, faces practical and methodological challenges. For example, event time information such as time to cancer progression is not readily available. Simple estimates of the event time based on billing or procedure codes may poorly approximate the true event time.</p>
<p>This package implements a two-step semi-supervised learning method on predicting event time with longitudinal encounter records. In step I, we employ a functional principal component analysis approach to efficiently approximate the intensity functions of individual encounters using the observed point processes in the unlabeled set. In step II, we fit a penalized proportional odds model to the event time outcomes with features derived in step I in the labeled data where the non-parametric baseline function is approximated using B-splines.</p>
<p><img src="https://github.com/celehs/MASTA/raw/master/flowchart/flowchart.png"></p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install development version from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"celehs/MASTA"</span>)</a></code></pre></div>
<p>Load the package into R.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MASTA)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">## Loading required package: survival</span></a></code></pre></div>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li><p><a href="https://celehs.github.io/MASTA/articles/data.html">Input Data for the MASTA Algorithm</a></p></li>
<li><p><a href="https://celehs.github.io/MASTA/articles/step1.html">Step I. Feature Extraction with Functional PCA</a></p></li>
<li><p><a href="https://celehs.github.io/MASTA/articles/step2.html">Step II. Model Estimation with B-Splines</a></p></li>
<li><p><a href="https://celehs.github.io/MASTA/articles/multicore.html">Acceleration with Multicore Parallel Computing</a></p></li>
</ul>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li><p>Liang, L., Uno, H., Ma, Y., Cai, T. <strong>Robust Approach to Event Time Annotation Using Longitudinal Medical Encounters</strong>. <em>Working Paper</em>.</p></li>
<li><p>Wu, S., Müller, H., Zhang, Z. (2013). <strong>Functional Data Analysis for Point Processes with Rare Events</strong>. <em>Statistica Sinica</em>, 23:1-23. <a href="https://doi.org/10.5705/ss.2010.162" class="uri">https://doi.org/10.5705/ss.2010.162</a></p></li>
</ul>
</div>
<div id="work-in-progress" class="section level2">
<h2 class="hasAnchor">
<a href="#work-in-progress" class="anchor"></a>Work in Progress</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">data_org2</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">## $TrainLong</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">## $TrainLong[[1]]</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">##           id  fu_time month pred1</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">##     1:     4 14.85010     1     3</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">##     2:     4 14.85010     2     1</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">##     3:     5 80.65708     4     3</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">##     4:     5 80.65708     5     4</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">##     5:     5 80.65708     6     4</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">##    ---                           </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">## 72913: 20599 13.93018     8     1</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">## 72914: 20599 13.93018    12     1</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">## 72915: 20600 24.70637    12     2</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">## 72916: 20600 24.70637    13     1</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">## 72917: 20600 24.70637    16     1</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">## $TrainLong[[2]]</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">##           id  fu_time month pred2</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">##     1:     1 49.41273    11     1</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">##     2:     5 80.65708     1     1</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">##     3:     5 80.65708     2     1</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">##     4:     5 80.65708     4     1</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">##     5:     6 42.64476     2     1</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">##    ---                           </span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">## 57206: 20600 24.70637     1     1</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">## 57207: 20600 24.70637    14     1</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">## 57208: 20600 24.70637    16     1</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">## 57209: 20600 24.70637    18     1</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">## 57210: 20600 24.70637    19     1</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">## $TrainLong[[3]]</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">##           id   fu_time month pred3</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">##     1:     6 42.644764    37     2</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">##     2:     6 42.644764    38     2</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">##     3:     6 42.644764    39     2</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">##     4:     6 42.644764    40     2</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">##     5:     6 42.644764    41     2</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">##    ---                            </span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">## 13892: 20597 14.652977    14     1</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">## 13893: 20598  8.147844     8     2</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">## 13894: 20599 13.930185    13     2</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">## 13895: 20600 24.706366    23     1</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">## 13896: 20600 24.706366    24     2</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">## $ValidLong</span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">## $ValidLong[[1]]</span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">##          id  fu_time month pred1</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">##    1: 90001 71.72074     9     1</span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">##    2: 90001 71.72074    52     1</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">##    3: 90001 71.72074    54     1</span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">##    4: 90003 14.94867     5     2</span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">##    5: 90003 14.94867     6     3</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">##   ---                           </span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">## 1358: 90496 35.58111     2     3</span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">## 1359: 90496 35.58111     3     3</span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">## 1360: 90496 35.58111     4     2</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"><span class="co">## 1361: 90496 35.58111     5     3</span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co">## 1362: 90496 35.58111    34     1</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-60" data-line-number="60"><span class="co">## $ValidLong[[2]]</span></a>
<a class="sourceLine" id="cb5-61" data-line-number="61"><span class="co">##         id   fu_time month pred2</span></a>
<a class="sourceLine" id="cb5-62" data-line-number="62"><span class="co">##   1: 90001  71.72074    44     1</span></a>
<a class="sourceLine" id="cb5-63" data-line-number="63"><span class="co">##   2: 90002  70.37372    21     1</span></a>
<a class="sourceLine" id="cb5-64" data-line-number="64"><span class="co">##   3: 90002  70.37372    30     1</span></a>
<a class="sourceLine" id="cb5-65" data-line-number="65"><span class="co">##   4: 90003  14.94867     1     1</span></a>
<a class="sourceLine" id="cb5-66" data-line-number="66"><span class="co">##   5: 90003  14.94867    10     1</span></a>
<a class="sourceLine" id="cb5-67" data-line-number="67"><span class="co">##  ---                            </span></a>
<a class="sourceLine" id="cb5-68" data-line-number="68"><span class="co">## 783: 90492 122.34908   121     1</span></a>
<a class="sourceLine" id="cb5-69" data-line-number="69"><span class="co">## 784: 90494  76.78029    26     1</span></a>
<a class="sourceLine" id="cb5-70" data-line-number="70"><span class="co">## 785: 90494  76.78029    38     1</span></a>
<a class="sourceLine" id="cb5-71" data-line-number="71"><span class="co">## 786: 90498  24.60780    15     1</span></a>
<a class="sourceLine" id="cb5-72" data-line-number="72"><span class="co">## 787: 90499  27.17043    21     1</span></a>
<a class="sourceLine" id="cb5-73" data-line-number="73"><span class="co">## </span></a>
<a class="sourceLine" id="cb5-74" data-line-number="74"><span class="co">## $ValidLong[[3]]</span></a>
<a class="sourceLine" id="cb5-75" data-line-number="75"><span class="co">##         id   fu_time month pred3</span></a>
<a class="sourceLine" id="cb5-76" data-line-number="76"><span class="co">##   1: 90003 14.948665    14     1</span></a>
<a class="sourceLine" id="cb5-77" data-line-number="77"><span class="co">##   2: 90010  7.622177     6     1</span></a>
<a class="sourceLine" id="cb5-78" data-line-number="78"><span class="co">##   3: 90027 41.659138    38     2</span></a>
<a class="sourceLine" id="cb5-79" data-line-number="79"><span class="co">##   4: 90027 41.659138    39     1</span></a>
<a class="sourceLine" id="cb5-80" data-line-number="80"><span class="co">##   5: 90032 14.357290    13     2</span></a>
<a class="sourceLine" id="cb5-81" data-line-number="81"><span class="co">##  ---                            </span></a>
<a class="sourceLine" id="cb5-82" data-line-number="82"><span class="co">## 243: 90487 81.051335    77    17</span></a>
<a class="sourceLine" id="cb5-83" data-line-number="83"><span class="co">## 244: 90487 81.051335    78    16</span></a>
<a class="sourceLine" id="cb5-84" data-line-number="84"><span class="co">## 245: 90487 81.051335    79    15</span></a>
<a class="sourceLine" id="cb5-85" data-line-number="85"><span class="co">## 246: 90487 81.051335    80    17</span></a>
<a class="sourceLine" id="cb5-86" data-line-number="86"><span class="co">## 247: 90487 81.051335    81     1</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/celehs/MASTA/issues">https://​github.com/​celehs/​MASTA/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Liang Liang <br><small class="roles"> Author </small>  </li>
<li>Hajime Uno <br><small class="roles"> Author, maintainer </small>  </li>
<li>Ming Yang <br><small class="roles"> Author </small>  </li>
<li>Tianxi Cai <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Liang Liang, Hajime Uno, Ming Yang, Tianxi Cai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
