---
title: "Input Data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```

The PETLER algorithm is a semi-supervised learning method and it requires two sources of input data.

- A labeled data with time-to-event outcomes and baseline covariates.

- A unlabeled data with longitudinal encounter records.

```{r, echo=FALSE, fig.width=5, fig.height=3}
DiagrammeR::grViz("
digraph flowchart {
  node [fontname = Helvetica, shape = rectangle]        
  tab1 [label = '@@1']
  tab2 [label = '@@2']
  tab3 [label = '@@3']
  tab4 [label = '@@4']
  tab5 [label = '@@5']
  tab1 -> tab2;
  tab1 -> tab3;
  tab2 -> tab4;
  tab2 -> tab5;
}
[1]: 'Input Data'
[2]: 'Labeled (n = 1,100)'
[3]: 'Unlabeled (N = 20,000)'
[4]: 'Training (n1 = 600)'
[5]: 'Validation (n2 = 500)'
")
```

The `PETLER` package contains a sample data called `data_org`.

```{r}
library(PETLER)
```

```{r, eval=FALSE}
?data_org # view data documentation
```

`data_org` is a list with four data tables.

```{r}
str(data_org)
```

## Longitudinal Encounter Data

`TrainCode` and `ValidCode` will be used in Step I of the PETLER algorithm to extract features from estimated subject-specific intensity functions of individual encounters.

```{r}
data_org[c("TrainCode", "ValidCode")]
```

## Time-to-Event Data

Together with the features derived from longitudinal encounter data,  `TrainCode` and `ValidCode` will be used in Step II of the PETLER algorithm to train and evaluate risk prediction models with survival outcomes.

```{r}
data_org[c("TrainSurv", "ValidSurv")]
```
