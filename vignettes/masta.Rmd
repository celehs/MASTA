---
title: "MASTA"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{MASTA}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Overview

...

## Installation


Load the package into R.

```{r}
library(MASTA)
```

## Data Example

### Data Preparation
```{r}
## Please refer to "follow_up_time", "longitudinal", and "survival".
```

### Run the 1st step (feature selection)
```{r}
Z <- fpca.combine(time_code, follow_up_time, K.select = "PropVar")
```

### Data preparation for the 2nd step (fitting)

```{r}
url <- "https://raw.githubusercontent.com/celehs/MASTA/master/data-raw/data_org/"
TrainSurv <- fread(paste0(url, "TrainSurv.csv"))
ValidSurv <- fread(paste0(url, "ValidSurv.csv"))
# load("data_org.rda")
TrainSurv <- data.frame(TrainSurv)
ValidSurv <- data.frame(ValidSurv)
colnames(TrainSurv) <- colnames(ValidSurv) <- c("case", "delta", "sx", "sc", paste0("base_pred", 1:3))

Z$nn <- nrow(TrainSurv)
Z$codes <- paste0("pred", 1:3)
Z$Tend <- 1
Z$TrainSurv <- TrainSurv
Z$ValidSurv <- ValidSurv
Z$TrainSurv_pred_org <- TrainSurv[, -c(1:4)]
Z$ValidSurv_pred_org <- ValidSurv[, -c(1:4)]
str(Z)
# save(Z,file="./data/data-for-fit.RData")
```

## Step 2


```{r}
object <- Z
cov_group <- NULL
thresh <- 0.7
PCAthresh <- 0.9
seed <- 1234
seed2 <- 100
```


```{r}
#-- test 1
b <- masta.fit(Z, cov_group = NULL, thresh = 0.7, PCAthresh = 0.9, seed = 1234, seed2 = 100)
b
```

```{r}
#-- test 2
b <- masta.fit(Z, cov_group = NULL, thresh = 1.0, PCAthresh = 0.9, seed = 1234, seed2 = 100)
b
```
